(this["webpackJsonp@minimal/minimal-kit-react"]=this["webpackJsonp@minimal/minimal-kit-react"]||[]).push([[58],{1797:function(e,t,a){"use strict";a.d(t,"a",(function(){return m}));var n=a(4),r=a(25),i=a(5),c=(a(1945),a(1970)),o=a(2),s=a(10),l=a(53),d=a(82),j=a(1442),b=a(817),u=a(104),h=a(22),p=a(0),x=["disabled","value","setValue","alignRight"],O=Object(s.a)(d.a)({position:"relative"}),f=Object(s.a)("div")((function(e){var t=e.theme;return{bottom:40,overflow:"hidden",position:"absolute",left:t.spacing(-2),boxShadow:t.customShadows.z20,borderRadius:2*Number(t.shape.borderRadius),"& .emoji-mart":{border:"none",backgroundColor:t.palette.background.paper},"& .emoji-mart-anchor":{color:t.palette.text.disabled,"&:hover, &:focus, &.emoji-mart-anchor-selected":{color:t.palette.text.primary}},"& .emoji-mart-bar":{borderColor:t.palette.divider},"& .emoji-mart-search input":{backgroundColor:"transparent",color:t.palette.text.primary,borderColor:t.palette.grey[50032],"&::placeholder":Object(i.a)(Object(i.a)({},t.typography.body2),{},{color:t.palette.text.disabled})},"& .emoji-mart-search-icon svg":{opacity:1,fill:t.palette.text.disabled},"& .emoji-mart-category-label span":Object(i.a)(Object(i.a)(Object(i.a)({},t.typography.subtitle2),Object(u.a)().bgBlur({color:t.palette.background.paper})),{},{color:t.palette.text.primary}),"& .emoji-mart-title-label":{color:t.palette.text.primary},"& .emoji-mart-category .emoji-mart-emoji:hover:before":{backgroundColor:t.palette.action.selected},"& .emoji-mart-emoji":{outline:"none"},"& .emoji-mart-preview-name":{color:t.palette.text.primary},"& .emoji-mart-preview-shortname, .emoji-mart-preview-emoticon":{color:t.palette.text.secondary}}}));function m(e){var t,a=e.disabled,s=e.value,d=e.setValue,u=e.alignRight,m=void 0!==u&&u,v=Object(r.a)(e,x),g=Object(l.a)(),y=Object(o.useState)(!1),w=Object(n.a)(y,2),C=w[0],k=w[1];C&&(t=Object(p.jsx)(c.a,{color:g.palette.primary.main,title:"Pick your emoji\u2026",emoji:"point_up",onSelect:function(e){return d(s+(null===e||void 0===e?void 0:e.native))}}));return Object(p.jsx)(j.a,{onClickAway:function(){k(!1)},children:Object(p.jsxs)(O,Object(i.a)(Object(i.a)({},v),{},{children:[Object(p.jsx)(f,{sx:Object(i.a)({},m&&{right:-2,left:"auto !important"}),children:t}),Object(p.jsx)(b.a,{disabled:a,size:"small",onClick:function(e){e.preventDefault(),k(!C)},children:Object(p.jsx)(h.a,{icon:"eva:smiling-face-fill",width:20,height:20})})]}))})}},1799:function(e,t,a){"use strict";a.d(t,"d",(function(){return h})),a.d(t,"b",(function(){return p})),a.d(t,"a",(function(){return x})),a.d(t,"c",(function(){return f}));var n=a(68),r=a(22),i=a(0),c=["jpg","jpeg","gif","bmp","png"],o=["m4v","avi","mpg","mp4","webm"],s=["doc","docx"],l=["xls","xlsx"],d=["ppt","pptx"],j=["pdf"],b=["psd"],u=["ai","esp"];function h(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return e&&e.split(".").pop()||""}function p(e){return e.substring(e.lastIndexOf("/")+1).replace(/\.[^/.]+$/,"")}function x(e){return e.split("/").pop()}var O=function(e){return Object(i.jsx)(n.a,{src:"https://minimal-assets-api.vercel.app/assets/icons/file/".concat(e,".svg"),alt:e,sx:{width:28,height:28}})};function f(e){var t;switch(function(e){var t;switch(e.includes(h(e))){case c.includes(h(e)):t="image";break;case o.includes(h(e)):t="video";break;case s.includes(h(e)):t="word";break;case l.includes(h(e)):t="excel";break;case d.includes(h(e)):t="powerpoint";break;case j.includes(h(e)):t="pdf";break;case b.includes(h(e)):t="photoshop";break;case u.includes(h(e)):t="illustrator";break;default:t=h(e)}return t}(e)){case"video":t=O("format_video");break;case"word":t=O("format_word");break;case"excel":t=O("format_excel");break;case"powerpoint":t=O("format_powerpoint");break;case"pdf":t=O("format_pdf");break;case"photoshop":t=O("format_photoshop");break;case"illustrator":t=O("format_ai");break;case"image":t=Object(i.jsx)(n.a,{src:e,alt:e,sx:{height:1}});break;default:t=Object(i.jsx)(r.a,{icon:"eva:file-fill",sx:{width:28,height:28}})}return t}},2523:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return It}));var n=a(2),r=a(1451),i=a(1453),c=a(26),o=a(583),s=a(37),l=a(96),d=a(323),j=a(539),b=a(4),u=a(5),h=a(10),p=a(53),x=a(817),O=a(1435),f=a(82),m=a(1601),v=a(103),g=a(22),y=a(33),w=a(322),C=a(1457),k=a(94),S=a(162),I=a(1799),R=a(83),P=a(0),T=Object(h.a)("div")((function(e){return{flexGrow:1,height:"100%",display:"flex",overflow:"hidden",flexDirection:"column",paddingBottom:e.theme.spacing(2)}})),A=Object(h.a)("div")((function(e){var t=e.theme;return{display:"flex",alignItems:"center",marginTop:t.spacing(2),padding:t.spacing(0,2.5)}})),D=Object(h.a)("div")((function(e){var t=e.theme;return{width:40,height:40,flexShrink:0,display:"flex",overflow:"hidden",alignItems:"center",justifyContent:"center",color:t.palette.text.secondary,borderRadius:t.shape.borderRadius,backgroundColor:t.palette.grey[50016]}})),M=Object(h.a)(w.a)((function(e){var t=e.theme;return Object(u.a)(Object(u.a)({},t.typography.overline),{},{height:40,flexShrink:0,borderRadius:0,padding:t.spacing(1,2),justifyContent:"space-between",color:t.palette.text.disabled})}));function W(e){var t=e.conversation,a=e.isCollapse,n=e.onCollapse,r=Object(y.uniq)(Object(y.flatten)(t.messages.map((function(e){return e.attachments})))).length;return Object(P.jsxs)(T,{children:[Object(P.jsxs)(M,{fullWidth:!0,color:"inherit",onClick:n,endIcon:Object(P.jsx)(g.a,{icon:a?"eva:arrow-ios-downward-fill":"eva:arrow-ios-forward-fill",width:16,height:16}),children:["attachment (",r,")"]}),!a&&Object(P.jsx)(O.a,{}),Object(P.jsx)(R.a,{children:Object(P.jsx)(C.a,{in:a,children:t.messages.map((function(e){return Object(P.jsx)("div",{children:e.attachments.map((function(t){return Object(P.jsx)(z,{file:e,fileUrl:t},t)}))},e.id)}))})})]})}function z(e){var t=e.file,a=e.fileUrl;return Object(P.jsxs)(A,{children:[Object(P.jsx)(D,{children:Object(I.c)(a)}),Object(P.jsxs)(f.a,{sx:{ml:1.5,maxWidth:150},children:[Object(P.jsx)(k.a,{variant:"body2",noWrap:!0,children:Object(I.a)(a)}),Object(P.jsx)(k.a,{noWrap:!0,variant:"caption",sx:{color:"text.secondary",display:"block"},children:Object(S.b)(t.createdAt)})]})]},a)}var E=a(15),F=a(818),L=Object(h.a)(w.a)((function(e){var t=e.theme;return Object(u.a)(Object(u.a)({},t.typography.overline),{},{height:40,borderRadius:0,padding:t.spacing(1,2),justifyContent:"space-between",color:t.palette.text.disabled})})),U=Object(h.a)("div")((function(e){return{display:"flex",margin:e.theme.spacing(1.5,0)}})),q=Object(h.a)(g.a)((function(e){var t=e.theme;return{width:16,height:16,marginTop:4,marginRight:t.spacing(1),color:t.palette.text.secondary}})),G=Object(h.a)(k.a)((function(e){var t=e.theme;return Object(u.a)({flexGrow:1,maxWidth:160,wordWrap:"break-word"},t.typography.body2)}));function N(e){var t=e.participants,a=e.isCollapse,n=e.onCollapse,r=Object(E.a)(t)[0];return void 0===r?null:Object(P.jsxs)(P.Fragment,{children:[Object(P.jsxs)(f.a,{sx:{pt:4,pb:3,display:"flex",alignItems:"center",flexDirection:"column"},children:[Object(P.jsx)(F.a,{alt:r.name,src:r.avatar,sx:{width:96,height:96}}),Object(P.jsxs)(f.a,{sx:{mt:2,textAlign:"center"},children:[Object(P.jsx)(k.a,{variant:"subtitle1",children:r.name}),Object(P.jsx)(k.a,{variant:"body2",sx:{color:"text.secondary"},children:r.position})]})]}),Object(P.jsx)(O.a,{}),Object(P.jsx)(L,{fullWidth:!0,color:"inherit",onClick:n,endIcon:Object(P.jsx)(g.a,{icon:a?"eva:arrow-ios-downward-fill":"eva:arrow-ios-forward-fill",width:16,height:16}),children:"information"}),Object(P.jsx)(C.a,{in:a,children:Object(P.jsxs)(f.a,{sx:{px:2.5,pb:1},children:[Object(P.jsxs)(U,{children:[Object(P.jsx)(q,{icon:"eva:pin-fill"}),Object(P.jsx)(G,{children:r.address})]}),Object(P.jsxs)(U,{children:[Object(P.jsx)(q,{icon:"eva:phone-fill"}),Object(P.jsx)(G,{children:r.phone})]}),Object(P.jsxs)(U,{children:[Object(P.jsx)(q,{icon:"eva:email-fill"}),Object(P.jsx)(G,{children:r.email})]})]})})]})}var _=a(1582),B=a(1543),H=a(1593),V=a(1542),Y=a(557),J=a(1599),K=a(48),Q=Object(h.a)("div")((function(e){return{display:"flex",alignItems:"center",justifyContent:"center",marginTop:e.theme.spacing(1.5)}}));function $(e){var t=e.participant,a=e.isOpen,n=e.onClose,r=t.name,i=t.avatar,c=t.position,o=t.address,s=t.phone,l=t.email;return Object(P.jsx)(K.a,{fullWidth:!0,maxWidth:"xs",open:a,onClose:n,children:Object(P.jsxs)(J.a,{sx:{pb:5,textAlign:"center"},children:[Object(P.jsx)(F.a,{alt:r,src:i,sx:{mt:5,mb:2,mx:"auto",width:96,height:96}}),Object(P.jsx)(k.a,{variant:"h6",children:r}),Object(P.jsx)(k.a,{variant:"body2",paragraph:!0,sx:{color:"text.secondary"},children:c}),Object(P.jsxs)(Q,{children:[Object(P.jsx)(g.a,{icon:"eva:pin-fill",sx:{mr:1,width:16,height:16,color:"text.disabled"}}),Object(P.jsx)(k.a,{variant:"body2",children:o})]}),Object(P.jsxs)(Q,{children:[Object(P.jsx)(g.a,{icon:"eva:phone-fill",sx:{mr:1,width:16,height:16,color:"text.disabled"}}),Object(P.jsx)(k.a,{variant:"body2",children:s})]}),Object(P.jsxs)(Q,{children:[Object(P.jsx)(g.a,{icon:"eva:email-fill",sx:{mr:1,width:16,height:16,color:"text.disabled"}}),Object(P.jsx)(k.a,{variant:"body2",children:l})]})]})})}var X=Object(h.a)(w.a)((function(e){var t=e.theme;return Object(u.a)(Object(u.a)({},t.typography.overline),{},{height:40,borderRadius:0,padding:t.spacing(1,2),justifyContent:"space-between",color:t.palette.text.disabled})}));function Z(e){var t=e.participants,a=e.selectUserId,n=e.onShowPopupUserInfo,r=e.isCollapse,i=e.onCollapse;return Object(P.jsxs)(P.Fragment,{children:[Object(P.jsxs)(X,{fullWidth:!0,disableRipple:!0,color:"inherit",onClick:i,endIcon:Object(P.jsx)(g.a,{icon:r?"eva:arrow-ios-downward-fill":"eva:arrow-ios-forward-fill",width:16,height:16}),children:["In room (",t.length,")"]}),Object(P.jsx)(f.a,{sx:{height:r?256:0},children:Object(P.jsx)(R.a,{children:Object(P.jsx)(C.a,{in:r,sx:{height:r?256:0},children:Object(P.jsx)(_.a,{disablePadding:!0,children:t.map((function(e){return Object(P.jsx)(ee,{participant:e,isOpen:a===e.id,onShowPopup:function(){return n(e.id)},onClosePopup:function(){return n(null)}},e.id)}))})})})})]})}function ee(e){var t=e.participant,a=e.isOpen,n=e.onClosePopup,r=e.onShowPopup,i=t.name,c=t.avatar,o=t.status,s=t.position;return Object(P.jsxs)(P.Fragment,{children:[Object(P.jsxs)(B.a,{onClick:r,sx:{height:64,px:2.5},children:[Object(P.jsx)(H.a,{children:Object(P.jsxs)(f.a,{sx:{position:"relative",width:40,height:40},children:[Object(P.jsx)(F.a,{alt:i,src:c}),Object(P.jsx)(Y.a,{status:o,sx:{right:0,bottom:0,position:"absolute"}})]})}),Object(P.jsx)(V.a,{primary:i,secondary:s,primaryTypographyProps:{variant:"subtitle2",noWrap:!0},secondaryTypographyProps:{noWrap:!0}})]}),Object(P.jsx)($,{participant:t,isOpen:a,onClose:n})]})}var te=240,ae=Object(h.a)((function(e){return Object(P.jsx)(x.a,Object(u.a)({disableRipple:!0},e))}))((function(e){var t=e.theme;return{right:0,zIndex:9,width:32,height:32,position:"absolute",top:t.spacing(1),boxShadow:t.customShadows.z8,backgroundColor:t.palette.background.paper,border:"solid 1px ".concat(t.palette.divider),borderRight:0,borderRadius:"12px 0 0 12px",transition:t.transitions.create("all"),"&:hover":{backgroundColor:t.palette.background.neutral}}}));function ne(e){var t=e.conversation,a=e.participants,r=Object(p.a)(),i=Object(n.useState)(!0),c=Object(b.a)(i,2),o=c[0],s=c[1],l=Object(n.useState)(!0),d=Object(b.a)(l,2),j=d[0],h=d[1],x=Object(n.useState)(null),y=Object(b.a)(x,2),w=y[0],C=y[1],k=Object(n.useState)(!0),S=Object(b.a)(k,2),I=S[0],R=S[1],T=Object(n.useState)(!0),A=Object(b.a)(T,2),D=A[0],M=A[1],z=Object(v.a)("up","lg"),E=a.length>1;Object(n.useEffect)((function(){return z?F():L()}),[z]);var F=function(){s(!0)},L=function(){s(!1)},U=Object(P.jsxs)(P.Fragment,{children:[E?Object(P.jsx)(Z,{selectUserId:w,participants:a,isCollapse:D,onShowPopupUserInfo:function(e){return C(e)},onCollapse:function(){return M((function(e){return!e}))}}):Object(P.jsx)("div",{children:Object(P.jsx)(N,{participants:a,isCollapse:j,onCollapse:function(){return h((function(e){return!e}))}})}),Object(P.jsx)(O.a,{}),Object(P.jsx)(W,{conversation:t,isCollapse:I,onCollapse:function(){return R((function(e){return!e}))}})]});return Object(P.jsxs)(f.a,{sx:{position:"relative"},children:[Object(P.jsx)(ae,{onClick:function(){s((function(e){return!e}))},sx:Object(u.a)({},o&&z&&{right:te}),children:Object(P.jsx)(g.a,{width:16,height:16,icon:o?"eva:arrow-ios-forward-fill":"eva:arrow-ios-back-fill"})}),z?Object(P.jsx)(m.a,{open:o,anchor:"right",variant:"persistent",sx:Object(u.a)(Object(u.a)({height:1,width:te,transition:r.transitions.create("width")},!o&&{width:"0px"}),{},{"& .MuiDrawer-paper":{position:"static",width:te}}),children:U}):Object(P.jsx)(m.a,{anchor:"right",ModalProps:{keepMounted:!0},open:o,onClose:L,sx:{"& .MuiDrawer-paper":{width:te}},children:U})]})}var re=a(7),ie=a.n(re),ce=a(13),oe=a(39),se=a(812),le=a(338),de=a(168),je=a(183),be=a(21),ue=a(718),he=a(200),pe=a(17),xe=6e4,Oe=1440,fe=43200,me=525600;function ve(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object(pe.a)(2,arguments);var n=a.locale||he.a;if(!n.formatDistance)throw new RangeError("locale must contain localize.formatDistance property");var r=Object(je.a)(e,t);if(isNaN(r))throw new RangeError("Invalid time value");var i,c,o=Object(ue.a)(a);o.addSuffix=Boolean(a.addSuffix),o.comparison=r,r>0?(i=Object(be.a)(t),c=Object(be.a)(e)):(i=Object(be.a)(e),c=Object(be.a)(t));var s,l=null==a.roundingMethod?"round":String(a.roundingMethod);if("floor"===l)s=Math.floor;else if("ceil"===l)s=Math.ceil;else{if("round"!==l)throw new RangeError("roundingMethod must be 'floor', 'ceil' or 'round'");s=Math.round}var d,j=c.getTime()-i.getTime(),b=j/xe,u=Object(de.a)(c)-Object(de.a)(i),h=(j-u)/xe;if("second"===(d=null==a.unit?b<1?"second":b<60?"minute":b<Oe?"hour":h<fe?"day":h<me?"month":"year":String(a.unit))){var p=s(j/1e3);return n.formatDistance("xSeconds",p,o)}if("minute"===d){var x=s(b);return n.formatDistance("xMinutes",x,o)}if("hour"===d){var O=s(b/60);return n.formatDistance("xHours",O,o)}if("day"===d){var f=s(h/Oe);return n.formatDistance("xDays",f,o)}if("month"===d){var m=s(h/fe);return 12===m&&"month"!==a.unit?n.formatDistance("xYears",1,o):n.formatDistance("xMonths",m,o)}if("year"===d){var v=s(h/me);return n.formatDistance("xYears",v,o)}throw new RangeError("unit must be 'second', 'minute', 'hour', 'day', 'month' or 'year'")}function ge(e,t){return Object(pe.a)(1,arguments),ve(e,Date.now(),t)}var ye=a(68),we=Object(h.a)("div")((function(e){return{display:"flex",marginBottom:e.theme.spacing(3)}})),Ce=Object(h.a)("div")((function(e){var t=e.theme;return{maxWidth:320,padding:t.spacing(1.5),marginTop:t.spacing(.5),borderRadius:t.shape.borderRadius,backgroundColor:t.palette.background.neutral}})),ke=Object(h.a)(k.a)((function(e){var t=e.theme;return{display:"flex",marginBottom:t.spacing(.75),color:t.palette.text.secondary}}));function Se(e){var t=e.message,a=e.conversation,n=e.onOpenLightbox,r=a.participants.find((function(e){return e.id===t.senderId})),i="8864c717-587d-472a-929a-8e5f298024da-0"===t.senderId?{type:"me"}:{avatar:null===r||void 0===r?void 0:r.avatar,name:null===r||void 0===r?void 0:r.name},c="me"===i.type,o="image"===t.contentType,s=i.name&&i.name.split(" ")[0];return Object(P.jsx)(we,{children:Object(P.jsxs)(f.a,{sx:Object(u.a)({display:"flex"},c&&{ml:"auto"}),children:["me"!==i.type&&Object(P.jsx)(F.a,{alt:i.name,src:i.avatar,sx:{width:32,height:32,mr:2}}),Object(P.jsxs)("div",{children:[Object(P.jsxs)(ke,{variant:"caption",sx:Object(u.a)({},c&&{justifyContent:"flex-end"}),children:[!c&&"".concat(s,","),"\xa0",ge(new Date(t.createdAt),{addSuffix:!0})]}),Object(P.jsx)(Ce,{sx:Object(u.a)(Object(u.a)({},c&&{color:"grey.800",bgcolor:"primary.lighter"}),o&&{p:0}),children:o?Object(P.jsx)(ye.a,{alt:"attachment",src:t.body,onClick:function(){return n(t.body)},sx:{borderRadius:1,cursor:"pointer","&:hover":{opacity:.8}}}):Object(P.jsx)(k.a,{variant:"body2",children:t.body})})]})]})})}function Ie(e){var t=e.conversation,a=Object(n.useRef)(null),r=Object(n.useState)(!1),i=Object(b.a)(r,2),c=i[0],o=i[1],s=Object(n.useState)(0),l=Object(b.a)(s,2),d=l[0],j=l[1];Object(n.useEffect)((function(){a.current&&(a.current.scrollTop=a.current.scrollHeight)}),[t.messages]);var u=t.messages.filter((function(e){return"image"===e.contentType})).map((function(e){return e.body})),h=function(e){var t=Object(y.findIndex)(u,(function(t){return t===e}));o(!0),j(t)};return Object(P.jsxs)(P.Fragment,{children:[Object(P.jsx)(R.a,{scrollableNodeProps:{ref:a},sx:{p:3,height:1},children:t.messages.map((function(e){return Object(P.jsx)(Se,{message:e,conversation:t,onOpenLightbox:h},e.id)}))}),Object(P.jsx)(le.a,{images:u,mainSrc:u[d],photoIndex:d,setPhotoIndex:j,isOpen:c,onCloseRequest:function(){return o(!1)}})]})}var Re=a(1550),Pe=a(1975),Te=a(429),Ae=Object(h.a)("div")((function(e){return{flexShrink:0,minHeight:92,display:"flex",alignItems:"center",padding:e.theme.spacing(0,3)}}));function De(e){var t=e.participants,a=t.length>1;return Object(P.jsxs)(Ae,{children:[a?Object(P.jsx)(We,{participants:t}):Object(P.jsx)(Me,{participants:t}),Object(P.jsx)(f.a,{sx:{flexGrow:1}}),Object(P.jsx)(x.a,{children:Object(P.jsx)(g.a,{icon:"eva:phone-fill",width:20,height:20})}),Object(P.jsx)(x.a,{children:Object(P.jsx)(g.a,{icon:"eva:video-fill",width:20,height:20})}),Object(P.jsx)(x.a,{children:Object(P.jsx)(g.a,{icon:"eva:more-vertical-fill",width:20,height:20})})]})}function Me(e){var t=e.participants,a=Object(E.a)(t)[0];return void 0!==a&&a.status?Object(P.jsxs)(f.a,{sx:{display:"flex",alignItems:"center"},children:[Object(P.jsxs)(f.a,{sx:{position:"relative"},children:[Object(P.jsx)(F.a,{src:a.avatar,alt:a.name}),Object(P.jsx)(Y.a,{status:a.status,sx:{position:"absolute",right:2,bottom:2}})]}),Object(P.jsxs)(f.a,{sx:{ml:2},children:[Object(P.jsx)(k.a,{variant:"subtitle2",children:a.name}),Object(P.jsx)(k.a,{variant:"body2",sx:{color:"text.secondary"},children:"offline"!==a.status?Object(Re.a)(a.status):Object(S.e)(a.lastActivity||"")})]})]}):null}function We(e){var t=e.participants;return Object(P.jsxs)("div",{children:[Object(P.jsx)(Pe.a,{max:3,sx:{mb:.5,"& .MuiAvatar-root":{width:32,height:32}},children:t.map((function(e){return Object(P.jsx)(F.a,{alt:e.name,src:e.avatar},e.id)}))}),Object(P.jsx)(Te.a,{variant:"body2",underline:"none",component:"button",color:"text.secondary",onClick:function(){},children:Object(P.jsxs)(f.a,{sx:{display:"flex",alignItems:"center"},children:[t.length," persons",Object(P.jsx)(g.a,{icon:"eva:arrow-ios-forward-fill"})]})})]})}var ze=a(1566),Ee=a(1533),Fe=a(1456),Le=a(1797),Ue=Object(h.a)("div")((function(e){return{minHeight:56,display:"flex",position:"relative",alignItems:"center",paddingLeft:e.theme.spacing(2)}}));function qe(e){var t=e.disabled,a=e.conversationId,r=e.onSend,i=Object(n.useRef)(null),c=Object(n.useState)(""),o=Object(b.a)(c,2),s=o[0],l=o[1],d=function(){var e;null===(e=i.current)||void 0===e||e.click()},j=function(){return s?(r&&a&&r({conversationId:a,messageId:Object(ze.a)(),message:s,contentType:"text",attachments:[],createdAt:new Date,senderId:"8864c717-587d-472a-929a-8e5f298024da-0"}),l("")):""};return Object(P.jsxs)(Ue,{children:[Object(P.jsx)(Ee.a,{disabled:t,fullWidth:!0,value:s,disableUnderline:!0,onKeyUp:function(e){"Enter"===e.key&&j()},onChange:function(e){return l(e.target.value)},placeholder:"Type a message",startAdornment:Object(P.jsx)(Fe.a,{position:"start",children:Object(P.jsx)(Le.a,{disabled:t,value:s,setValue:l})}),endAdornment:Object(P.jsxs)(se.a,{direction:"row",spacing:1,sx:{flexShrink:0,mr:1.5},children:[Object(P.jsx)(x.a,{disabled:t,size:"small",onClick:d,children:Object(P.jsx)(g.a,{icon:"ic:round-add-photo-alternate",width:22,height:22})}),Object(P.jsx)(x.a,{disabled:t,size:"small",onClick:d,children:Object(P.jsx)(g.a,{icon:"eva:attach-2-fill",width:22,height:22})}),Object(P.jsx)(x.a,{disabled:t,size:"small",children:Object(P.jsx)(g.a,{icon:"eva:mic-fill",width:22,height:22})})]})}),Object(P.jsx)(O.a,{orientation:"vertical",flexItem:!0}),Object(P.jsx)(x.a,{color:"primary",disabled:!s,onClick:j,sx:{mx:1},children:Object(P.jsx)(g.a,{icon:"ic:round-send",width:22,height:22})}),Object(P.jsx)("input",{type:"file",ref:i,style:{display:"none"}})]})}var Ge=a(576),Ne=a.n(Ge),_e=a(577),Be=a.n(_e),He=a(58),Ve=a(1572),Ye=a(1571),Je=a(1578),Ke=a(550),Qe=Object(h.a)("div")((function(e){return{display:"flex",alignItems:"center",padding:e.theme.spacing(2,3)}})),$e=Object(h.a)("div")((function(e){var t=e.theme;return{"& .MuiAutocomplete-root":{minWidth:280,marginLeft:t.spacing(2),"&.Mui-focused .MuiAutocomplete-inputRoot":{boxShadow:t.customShadows.z8}},"& .MuiAutocomplete-inputRoot":{transition:t.transitions.create("box-shadow",{easing:t.transitions.easing.easeInOut,duration:t.transitions.duration.shorter}),"& fieldset":{borderWidth:"1px !important",borderColor:"".concat(t.palette.grey[50032]," !important")}}}}));function Xe(e){var t=e.contacts,a=e.recipients,r=e.onAddRecipients,i=Object(n.useState)(""),c=Object(b.a)(i,2),o=c[0],s=c[1];return Object(P.jsxs)(Qe,{children:[Object(P.jsx)(k.a,{variant:"subtitle2",sx:{color:"text.secondary"},children:"To:"}),Object(P.jsx)($e,{children:Object(P.jsx)(Ve.a,{multiple:!0,size:"small",disablePortal:!0,popupIcon:null,noOptionsText:Object(P.jsx)(Ke.a,{searchQuery:o}),onChange:function(e,t){return function(e){s(""),r(e)}(t)},onInputChange:function(e,t){return s(t)},options:t,getOptionLabel:function(e){return e.name},renderOption:function(e,t,a){var n=a.inputValue,r=a.selected,i=t.name,c=t.avatar,o=Be()(i,n),s=Ne()(i,o);return Object(P.jsxs)("li",Object(u.a)(Object(u.a)({},e),{},{children:[Object(P.jsxs)(f.a,{sx:{width:32,height:32,overflow:"hidden",borderRadius:"50%",position:"relative"},children:[Object(P.jsx)(F.a,{alt:i,src:c}),Object(P.jsx)(f.a,{sx:Object(u.a)({top:0,opacity:0,width:"100%",height:"100%",display:"flex",position:"absolute",alignItems:"center",justifyContent:"center",bgcolor:function(e){return Object(He.a)(e.palette.grey[900],.8)},transition:function(e){return e.transitions.create("opacity",{easing:e.transitions.easing.easeInOut,duration:e.transitions.duration.shorter})}},r&&{opacity:1,color:"primary.main"}),children:Object(P.jsx)(g.a,{icon:"eva:checkmark-fill",width:20,height:20})})]}),Object(P.jsx)(f.a,{sx:{ml:2}}),s.map((function(e,t){return Object(P.jsx)(k.a,{variant:"subtitle2",color:e.highlight?"primary":"textPrimary",children:e.text},t)}))]}))},renderTags:function(e,t){return e.map((function(e,a){var r=e.id,i=e.name,c=e.avatar;return Object(n.createElement)(Ye.a,Object(u.a)(Object(u.a)({},t({index:a})),{},{key:r,size:"small",label:i,color:"info",avatar:Object(P.jsx)(F.a,{alt:i,src:c})}))}))},renderInput:function(e){return Object(P.jsx)(Je.a,Object(u.a)(Object(u.a)({},e),{},{placeholder:0===a.length?"Recipients":""}))}})})]})}function Ze(){var e=Object(c.d)(),t=Object(oe.g)(),a=Object(oe.f)().pathname,r=Object(oe.h)().conversationKey,i=Object(c.e)((function(e){return e.chat})),l=i.contacts,d=i.recipients,j=i.participants,b=i.activeConversationId,u=Object(c.e)((function(e){return function(e){var t=e.chat,a=t.conversations,n=t.activeConversationId,r=n?a.byId[n]:null;return r||{id:"",messages:[],participants:[],unreadCount:0,type:""}}(e)})),h=r?"DETAIL":"COMPOSE",p=j.filter((function(e){return"8864c717-587d-472a-929a-8e5f298024da-0"!==e.id}));Object(n.useEffect)((function(){r?function(){var a=Object(ce.a)(ie.a.mark((function a(){return ie.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return e(Object(o.f)(r)),a.prev=1,a.next=4,e(Object(o.d)(r));case 4:a.next=10;break;case 6:a.prev=6,a.t0=a.catch(1),console.error(a.t0),t(s.b.chat.new);case 10:case"end":return a.stop()}}),a,null,[[1,6]])})));return function(){return a.apply(this,arguments)}}()():b&&e(Object(o.i)())}),[r]),Object(n.useEffect)((function(){b&&e(Object(o.g)(b))}),[e,b]);var x=function(){var t=Object(ce.a)(ie.a.mark((function t(a){return ie.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:try{e(Object(o.h)(a))}catch(n){console.error(n)}case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(P.jsxs)(se.a,{sx:{flexGrow:1,minWidth:"1px"},children:["DETAIL"===h?Object(P.jsx)(De,{participants:p}):Object(P.jsx)(Xe,{recipients:d,contacts:Object.values(l.byId),onAddRecipients:function(t){e(Object(o.a)(t))}}),Object(P.jsx)(O.a,{}),Object(P.jsxs)(f.a,{sx:{flexGrow:1,display:"flex",overflow:"hidden"},children:[Object(P.jsxs)(se.a,{sx:{flexGrow:1},children:[Object(P.jsx)(Ie,{conversation:u}),Object(P.jsx)(O.a,{}),Object(P.jsx)(qe,{conversationId:b,onSend:x,disabled:a===s.b.chat.new})]}),"DETAIL"===h&&Object(P.jsx)(ne,{conversation:u,participants:p})]})]})}var et=a(1454),tt=a(819),at=a(1604),nt=a(1549),rt=a(1564),it=a(84),ct=a(227),ot=["online","invisible","away"];function st(){var e=Object(it.a)().user,t=Object(n.useRef)(null),a=Object(n.useState)(!1),r=Object(b.a)(a,2),i=r[0],c=r[1],o=Object(n.useState)("online"),s=Object(b.a)(o,2),l=s[0],d=s[1];return Object(P.jsxs)(P.Fragment,{children:[Object(P.jsxs)(f.a,{ref:t,sx:{position:"relative"},children:[Object(P.jsx)(ct.a,{onClick:function(){c(!0)},sx:{cursor:"pointer",width:48,height:48}}),Object(P.jsx)(Y.a,{status:l,sx:{position:"absolute",bottom:2,right:2}})]}),Object(P.jsxs)(et.a,{open:i,onClose:function(){c(!1)},anchorEl:t.current,anchorOrigin:{vertical:"top",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"},children:[Object(P.jsxs)(f.a,{sx:{py:2,pr:1,pl:2.5,display:"flex",alignItems:"center"},children:[Object(P.jsx)(ct.a,{}),Object(P.jsxs)(f.a,{sx:{ml:2,mr:3},children:[Object(P.jsx)(k.a,{noWrap:!0,variant:"subtitle1",children:null===e||void 0===e?void 0:e.displayName}),Object(P.jsx)(k.a,{noWrap:!0,variant:"body2",sx:{color:"text.secondary"},children:null===e||void 0===e?void 0:e.email})]}),Object(P.jsx)(tt.a,{title:"Log out",children:Object(P.jsx)(x.a,{children:Object(P.jsx)(g.a,{icon:"ic:round-power-settings-new",width:20,height:20})})})]}),Object(P.jsx)(O.a,{}),Object(P.jsxs)(_.a,{children:[Object(P.jsxs)(at.a,{sx:{px:2.5},children:[Object(P.jsx)(nt.a,{children:Object(P.jsx)(Y.a,{size:"large",status:l,sx:{m:.5}})}),Object(P.jsx)(V.a,{children:Object(P.jsx)(rt.a,{native:!0,value:l,onChange:function(e){return d(e.target.value)},sx:{"& svg":{display:"none"},"& select":{p:0,typography:"body2"},"& fieldset":{display:"none"}},children:ot.map((function(e){return Object(P.jsx)("option",{value:e,children:Object(Re.a)(e)},e)}))})})]}),Object(P.jsxs)(B.a,{sx:{px:2.5},children:[Object(P.jsx)(nt.a,{children:Object(P.jsx)(g.a,{icon:"ic:round-account-box",width:20,height:20})}),Object(P.jsx)(V.a,{primary:"Profile",primaryTypographyProps:{variant:"body2"}})]}),Object(P.jsxs)(B.a,{sx:{px:2.5},children:[Object(P.jsx)(nt.a,{children:Object(P.jsx)(g.a,{icon:"eva:settings-2-fill",width:20,height:20})}),Object(P.jsx)(V.a,{primary:"Settings",primaryTypographyProps:{variant:"body2"}})]})]})]})]})}var lt=a(54);function dt(e){var t=e.query,a=e.results,n=e.onSelectContact,r=a.length>0;return Object(P.jsxs)(P.Fragment,{children:[Object(P.jsx)(k.a,{paragraph:!0,variant:"subtitle1",sx:{px:3,color:"text.secondary"},children:"Contacts"}),Object(P.jsx)(_.a,{disablePadding:!0,children:a.map((function(e){return Object(P.jsxs)(B.a,{onClick:function(){return n(e)},sx:{py:1.5,px:3},children:[Object(P.jsx)(H.a,{children:Object(P.jsx)(F.a,{alt:e.name,src:e.avatar})}),Object(P.jsx)(V.a,{primary:e.name,primaryTypographyProps:{noWrap:!0,variant:"subtitle2"}})]},e.id)}))}),!r&&Object(P.jsx)(Ke.a,{searchQuery:t,sx:{p:3,mx:"auto",width:"calc(100% - 48px)",bgcolor:"background.neutral"}})]})}var jt=a(25),bt=a(1579),ut=a(1442),ht=a(1580),pt=["query","onChange","onFocus","onClickAway"],xt=Object(h.a)("div")((function(e){return{marginTop:e.theme.spacing(2)}})),Ot=Object(h.a)(bt.a)((function(e){var t=e.theme;return{transition:t.transitions.create("box-shadow",{easing:t.transitions.easing.easeInOut,duration:t.transitions.duration.shorter}),"&.Mui-focused":{boxShadow:t.customShadows.z8},"& fieldset":{borderWidth:"1px !important",borderColor:"".concat(t.palette.grey[50032]," !important")}}}));function ft(e){var t=e.query,a=e.onChange,n=e.onFocus,r=e.onClickAway,i=Object(jt.a)(e,pt);return Object(P.jsx)(ut.a,{onClickAway:r,children:Object(P.jsx)(xt,Object(u.a)(Object(u.a)({},i),{},{children:Object(P.jsx)(ht.a,{fullWidth:!0,size:"small",children:Object(P.jsx)(Ot,{value:t,onFocus:n,onChange:a,placeholder:"Search contacts...",startAdornment:Object(P.jsx)(Fe.a,{position:"start",children:Object(P.jsx)(g.a,{icon:"eva:search-fill",sx:{color:"text.disabled"}})})})})}))})}var mt=a(335),vt=Object(h.a)(B.a)((function(e){var t=e.theme;return{padding:t.spacing(1.5,3),transition:t.transitions.create("all")}})),gt=Object(h.a)("div")({position:"relative",width:48,height:48,"& .MuiAvatar-img":{borderRadius:"50%"},"& .MuiAvatar-root":{width:"100%",height:"100%"}});function yt(e){var t=e.isSelected,a=e.conversation,n=e.isOpenSidebar,r=e.onSelectConversation,i=function(e,t){var a=e.participants.filter((function(e){return e.id!==t})),n=a.reduce((function(e,t){return[].concat(Object(E.a)(e),[t.name])}),[]).join(", "),r="",i=e.messages[e.messages.length-1];if(i){var c=i.senderId===t?"You: ":"",o="image"===i.contentType?"Sent a photo":i.body;r="".concat(c).concat(o)}return{otherParticipants:a,displayNames:n,displayText:r}}(a,"8864c717-587d-472a-929a-8e5f298024da-0"),c=Object(y.last)(a.messages).createdAt,o=i.otherParticipants.length>1,s=a.unreadCount>0,l=o&&i.otherParticipants.map((function(e){return e.status})).includes("online");return Object(P.jsxs)(vt,{onClick:r,sx:Object(u.a)({},t&&{bgcolor:"action.selected"}),children:[Object(P.jsx)(H.a,{children:Object(P.jsxs)(f.a,{sx:Object(u.a)({},o&&{position:"relative",width:48,height:48,"& .avatarWrapper":{position:"absolute",width:32,height:32,"&:nth-of-type(1)":{left:0,zIndex:9,bottom:2,"& .MuiAvatar-root":{border:function(e){return"solid 2px ".concat(e.palette.background.paper)}}},"&:nth-of-type(2)":{top:2,right:0}}}),children:[i.otherParticipants.slice(0,2).map((function(e){return Object(P.jsxs)(gt,{className:"avatarWrapper",children:[Object(P.jsx)(F.a,{alt:e.name,src:e.avatar}),!o&&Object(P.jsx)(Y.a,{status:e.status,sx:{right:2,bottom:2,position:"absolute"}})]},e.id)})),l&&Object(P.jsx)(Y.a,{status:"online",sx:{right:2,bottom:2,position:"absolute"}})]})}),n&&Object(P.jsxs)(P.Fragment,{children:[Object(P.jsx)(V.a,{primary:i.displayNames,primaryTypographyProps:{noWrap:!0,variant:"subtitle2"},secondary:i.displayText,secondaryTypographyProps:{noWrap:!0,variant:s?"subtitle2":"body2",color:s?"textPrimary":"textSecondary"}}),Object(P.jsxs)(f.a,{sx:{ml:2,height:44,display:"flex",alignItems:"flex-end",flexDirection:"column"},children:[Object(P.jsx)(f.a,{sx:{mb:1.25,fontSize:12,lineHeight:"22px",whiteSpace:"nowrap",color:"text.disabled"},children:ge(new Date(c),{addSuffix:!1})}),s&&Object(P.jsx)(Y.a,{status:"unread",size:"small"})]})]})]})}var wt=["conversations","isOpenSidebar","activeConversationId","sx"];function Ct(e){var t=e.conversations,a=e.isOpenSidebar,n=e.activeConversationId,r=e.sx,i=Object(jt.a)(e,wt),c=Object(oe.g)(),o=!t.allIds.length;return Object(P.jsx)(_.a,Object(u.a)(Object(u.a)({disablePadding:!0,sx:r},i),{},{children:(o?Object(E.a)(Array(12)):t.allIds).map((function(e,r){return e?Object(P.jsx)(yt,{isOpenSidebar:a,conversation:t.byId[e],isSelected:n===e,onSelectConversation:function(){return function(e){var a="",n=t.byId[e];if("GROUP"===n.type)a=n.id;else{var r=n.participants.find((function(e){return"8864c717-587d-472a-929a-8e5f298024da-0"!==e.id}));(null===r||void 0===r?void 0:r.username)&&(a=null===r||void 0===r?void 0:r.username)}c("".concat(s.b.chat.root,"/").concat(a))}(e)}},e):Object(P.jsx)(mt.a,{},r)}))}))}var kt=Object(h.a)((function(e){return Object(P.jsx)(x.a,Object(u.a)({disableRipple:!0},e))}))((function(e){var t=e.theme;return{left:0,zIndex:9,width:32,height:32,position:"absolute",top:t.spacing(13),borderRadius:"0 12px 12px 0",color:t.palette.primary.contrastText,backgroundColor:t.palette.primary.main,boxShadow:t.customShadows.primary,"&:hover":{backgroundColor:t.palette.primary.darker}}}));function St(){var e=Object(p.a)(),t=Object(oe.g)(),a=Object(oe.f)().pathname,r=Object(n.useState)(!0),i=Object(b.a)(r,2),o=i[0],l=i[1],d=Object(n.useState)(""),j=Object(b.a)(d,2),h=j[0],O=j[1],y=Object(n.useState)([]),w=Object(b.a)(y,2),C=w[0],k=w[1],S=Object(n.useState)(!1),I=Object(b.a)(S,2),T=I[0],A=I[1],D=Object(c.e)((function(e){return e.chat})),M=D.conversations,W=D.activeConversationId,z=Object(v.a)("up","md"),E=h&&T,F=z&&!o;Object(n.useEffect)((function(){return z?L():U()}),[z,a]),Object(n.useEffect)((function(){if(!o)return A(!1)}),[o]);var L=function(){l(!0)},U=function(){l(!1)},q=function(){l((function(e){return!e}))},G=function(){var e=Object(ce.a)(ie.a.mark((function e(t){var a,n;return ie.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,a=t.target.value,O(a),!a){e.next=10;break}return e.next=6,lt.a.get("/api/chat/search",{params:{query:a}});case 6:n=e.sent,k(n.data.results),e.next=11;break;case 10:k([]);case 11:e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),console.error(e.t0);case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t){return e.apply(this,arguments)}}(),N=function(e){A(!1),O(""),t("".concat(s.b.chat.root,"/").concat(e))},_=Object(P.jsxs)(P.Fragment,{children:[Object(P.jsxs)(f.a,{sx:{py:2,px:3},children:[Object(P.jsxs)(se.a,{direction:"row",alignItems:"center",justifyContent:"center",children:[!F&&Object(P.jsxs)(P.Fragment,{children:[Object(P.jsx)(st,{}),Object(P.jsx)(f.a,{sx:{flexGrow:1}})]}),Object(P.jsx)(x.a,{onClick:q,children:Object(P.jsx)(g.a,{width:20,height:20,icon:o?"eva:arrow-ios-back-fill":"eva:arrow-ios-forward-fill"})}),!F&&Object(P.jsx)(x.a,{onClick:function(){return t(s.b.chat.new)},children:Object(P.jsx)(g.a,{icon:"eva:edit-fill",width:20,height:20})})]}),!F&&Object(P.jsx)(ft,{query:h,onFocus:function(){A(!0)},onChange:G,onClickAway:function(){A(!1),O("")}})]}),Object(P.jsx)(R.a,{children:E?Object(P.jsx)(dt,{query:h,results:C,onSelectContact:function(e){N&&N(e.username)}}):Object(P.jsx)(Ct,{conversations:M,isOpenSidebar:o,activeConversationId:W,sx:Object(u.a)({},T&&{display:"none"})})})]});return Object(P.jsxs)(P.Fragment,{children:[!z&&Object(P.jsx)(kt,{onClick:q,children:Object(P.jsx)(g.a,{width:16,height:16,icon:"eva:people-fill"})}),z?Object(P.jsx)(m.a,{open:o,variant:"persistent",sx:Object(u.a)({width:320,transition:e.transitions.create("width"),"& .MuiDrawer-paper":{position:"static",width:320}},F&&{width:96,"& .MuiDrawer-paper":{width:96,position:"static",transform:"none !important",visibility:"visible !important"}}),children:_}):Object(P.jsx)(m.a,{ModalProps:{keepMounted:!0},open:o,onClose:U,sx:{"& .MuiDrawer-paper":{width:320}},children:_})]})}function It(){var e=Object(l.a)().themeStretch,t=Object(c.d)();return Object(n.useEffect)((function(){t(Object(o.e)()),t(Object(o.c)())}),[t]),Object(P.jsx)(d.a,{title:"Chat",children:Object(P.jsxs)(r.a,{maxWidth:!e&&"xl",children:[Object(P.jsx)(j.a,{heading:"Chat",links:[{name:"Dashboard",href:s.b.root},{name:"Chat"}]}),Object(P.jsxs)(i.a,{sx:{height:"72vh",display:"flex"},children:[Object(P.jsx)(St,{}),Object(P.jsx)(Ze,{})]})]})})}}}]);
//# sourceMappingURL=58.e1f3319b.chunk.js.map